<!DOCTYPE html>
<html lang="en" id="top">

<head>
   <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Bodingles | Colt Steele</title>

   <!-- Link Favicon -->
   <link rel="icon" href="/images/logos/favicon.ico" type="image/x-icon">

   <!-- link stylesheet -->
   <link rel="stylesheet" href="/css/cssReset.css">
   <link rel="stylesheet" href="/css/root.css">
</head>

<body>
   <!-- Header -->
   <header id="app-header"></header>

   <!-- Main Body -->
   <section id="main" class="content">
      <!-- Title -->
      <section>
         <h2><i>The Web Developer Bootcamp 2024</i></h2>
         <p>Colt Steele</p>
         <p><a href="../templatingIndex.html">Back to Templating Index Page</a></p>
         <hr style="width: 40%;">
         <p>&nbsp;</p>
         <h5>Express Views & Templates</h5>
      </section>

      <section id="textWindow4" class="just">
         <!-- recap -->
         <article>
            <h6>Recap</h6>
            <p><span class="firstWord">T</span>o recap, so far we have:
               <ol>
                  <li>Our "Parent" directory set up.</li>
                  <li>Our <b>package.json</b> file is set.</li>
                  <li><b>Express</b> is installed</li>
                  <li>Our <b>index.js</b> Server File is set</li>
                  <li><b>nodemon</b> is installed <i>(for build purposes)</i></li>
                  <li><b>EJS</b> is installed.</li>
                  <li>and we have our <b>views</b> folder for our templates.</li>
               </ol>
            and here is what we have for our Server Code so far:
               <ul class="sectHighlight">
                  <li>JavaScript</li>
                  <li class="commentStyle"><span class="colorBlue">index</span>.js | Server Code</li>
                  <li>&nbsp;</li>
                  <li class="commentStyle">// Set the variables and requires</li>
                  <li>const <span class="colorGreen">express</span> = require( '<span class="colorPurple">express</span>' );</li>
                  <li>const <span class="colorGreen">app</span> = <span class="colorPurple">express()</span>;</li>
                  <li>const <span class="colorGreen">port</span> = <b>3000</b>;</li>
                  <li>&nbsp;</li>
                  <li class="commentStyle">// set our view engine to ejs</li>
                  <li>app.<span class="colorBlue">set</span>( 'view engine', 'ejs' );</li>
                  <li>&nbsp;</li>
                  <li class="commentStyle">// get request for root dir</li>
                  <li>app.<span class="colorBlue">get</span>( '/', ( req, res ) => {
                     <ul>
                        <li>res.<span class="colorRed">send</span>('Responding on Root Directory.')</li>
                     </ul>
                  </li>
                  <li>})</li>
                  <li>&nbsp;</li>
                  <li class="commentStyle">// Start Server : Listening on {port}</li>
                  <li>app.<span class="colorBlue">listen</span>( port, () => {
                     <ul>
                        <li>console.log(`Server Online : Listening on port: ${port}`);</li>
                     </ul>
                  </li>
                  <li>})</li>
               </ul>
            </p>
         </article>

         <!-- Setting up Views -->
         <article>
            <h6>Setting Up our Views</h6>
            <p><span class="firstWord">N</span>ow when we talk about <b>views</b>, we are talking about our templates. So from here on, we're just going to call them <b>views</b>.</p>
            <p>Ok, moving on. We're going to create a <b>view</b> for our "Home Page", so under our <b>views</b> directory, we'll create a new sub-directory called, <b>home</b>. Also, the filename must end with the extension <b>.ejs</b>. So the path is views/home.ejs.</p>
            <p>Now, in our <b>home.ejs</b> file, we write html code but the <b>ejs</b> gives us some new capabilities we will discuss in a bit. Let's start by creating the basic html structure with [<b>sh + !</b>].</p>
            <p>This gives us our basic html structure. In the body we'll add an &lt;h3>EJS Home Page&lt;/h3> with a couple of <b>Lorem Ipsum</b> paragraphs.</p>
            <p>Now, within our <b>index.js</b> Server File, we can <b>send</b> back a file template, instead of a string of text, like we have done so far. The <b>express</b> method we are going to use for this is called <b>render</b> and it's info can be <a href="https://expressjs.com/en/5x/api.html#res.render" target="_blank" crossorigin="anonymous" referrerpolicy="no-referrer">found here</a>. According to the documentation, it Renders a view and sends the rendered HTML string to the client.</p>
            <p>So instead of <b>send</b>ing a string of text, we're going to be <b>send</b>ing a string of html data.</p>
            <p>So in our <b>index.js</b> Server File that we have so far, we have the following code:
            <ul class="sectHighlight">
               <li class="commentStyle">// get request for root dir</li>
               <li>app.<span class="colorBlue">get</span>( '/', ( req, res ) => {
                  <ul>
                     <li>res.<span class="colorRed">send</span>('Responding on Root Directory.')</li>
                  </ul>
               </li>
               <li>})</li>
            </ul>
         This sets up a <b>get</b> request that returns "Responding on Root Directory." if the root directory <b>/</b> is requested. And we're going to modify this with to use the <b>render</b> method, like so:
            <ul class="sectHighlight">
               <li class="commentStyle">// get request for root dir</li>
               <li>app.<span class="colorBlue">get</span>( '/', ( req, res ) => {
                  <ul>
                     <li>res.<span class="colorRed">render</span>('home')</li>
                  </ul>
               </li>
               <li>})</li>
            </ul>
         </p>
         <p>Now, a couple of points here with our <b>render</b> method:
            <ul>
               <li>We didn't need to define our path as <b>views/home</b>, because:
                  <ul>
                     <li>- according to the <b>express</b> documentation, the default <b>view</b> is a <b>views</b> sub-directory.</li>
                     <li>- we <b>did not</b> change the default express <b>views</b>, (but we could have).</li>
                     <li>- we created this directory earlier.</li>
                  </ul>
               </li>
            </ul>
            Also, we did not need to specify <b>home.ejs</b> in the render method, because when we defined the <b>view engine</b> with the line:
            <ul class="sectHighlight">
               <li>app.set( 'view engine', 'ejs' );</li>
            </ul>
         we also defined the default file type as <b>ejs</b>. So we can just send the string as:
            <ul><li>res.<span class="colorRed">render</span>('home')</li></ul></p>
         <p>Now we mentioned earlier that in our <b>home.ejs</b> file, we write <b>html</b> code, but the ejs gives us some new capabilities. One of the biggest capabilities is the ability to writ Js code <i>inside</i> of our <b>ejs</b> file. The Js code will run and the output will be converted to html for display. Coming up next, we'll see how.</p>
         </article><hr>
      </section>

      <p><br><a href="#top">Back to Top</a></p>
      <p>&nbsp;</p>
   </section>

   <!-- footer -->
   <footer id="app-footer"></footer>

   <!-- scripts -->
   <script src="/header.js"></script>
   <script src="/footer.js"></script>
   <script src="../express/index.js"></script>
</body>
</html>