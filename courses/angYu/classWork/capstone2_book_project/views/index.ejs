<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>The Books Project</title>
   <!-- Link Favicon -->
   <link rel="icon" href="images/favicon.ico" type="image/x-icon">

   <!-- link stylesheet -->
   <link rel="stylesheet" href="styles/main.css">
</head>

<body class="gradient-background">

   <h1>The Book Project</h1>

   <div>
      <p>Search for a book to add to our DataBase.</p>
      <form action="/" method="post">
         <input class="bookSearch" type="text" id="bookSearch" name="bookTitle" placeholder="Book Title">
         <button class="searchButton">Submit</button>
      </form>
   </div>

   <div class="container">
      <% if (bookdata.length) { %>
         <% bookdata.forEach((book) => { %>
            <div class="card">
               <div class="bookCover" style="background-image: url('<%= book.cover %>');"></div>
               <div class="bookText"><%= book.descr %></div>
               <div class="bookDetails">
                  <div class="bookTitle">
                     <a href="<%= book.webaddress %>" target="_blank"><%= book.title %></a>
                  </div>
                  <p><%= book.author %></p>
                  <p>First Published: <%= book.published %></p>
                  <div class="rating">
                     <% let stars = Math.trunc(book.rating) %>
                     <% let halfstars = book.rating - stars %>
                     <div class="delete">
                        <form action="/delete" method="post">
                           <input type="hidden" name="id" value="<%= book.id %>">
                           <button type="submit">
                              <img src="../images/trash.png" alt="delete" width="20px">
                           </button>
                        </form>
                     </div>
                     <div>
                        <% for (i=1; i<=stars; i++) {%>
                           <img src="../images/starFull.png" alt="rating" width="22">
                        <% } %>
                        <% if (halfstars > 0) { %>
                           <img src="../images/starHalf.png" alt="rating" width="22">
                        <%  } %>
                     </div>
                     <div class="edit">
                        <form action="/edit" method="post">
                           <button type="submit">
                              <img src="../images/pencil.png" alt="delete" width="20px">
                           </button>
                        </form>
                     </div>
                  </div>
               </div>
            </div>
         <% }) %>
      <% } else { %>
         <h3>No Books In Database</h3>
      <% } %>
   </div>

</body>
</html>